{"ast":null,"code":"var _jsxFileName = \"C:\\\\Desktop\\\\GitHub\\\\assignment-3-mikeycody5\\\\src\\\\components\\\\timers\\\\Tabata.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport DisplayTime from \"../timers/shared/DisplayTime.js\";\nimport Input from \"../timers/shared/input.js\";\nimport ProgressBar from \"../timers/shared/ProgressBar.js\";\nimport DisplayRounds from \"../timers/shared/DisplayRounds\";\nimport { GlobalContext } from \"../../App.js\";\nconst Tabata = props => {\n  const rounds = props.rounds;\n  const index = props.index;\n  const initialTime = (props.minutes * 60 + props.seconds) * 1000;\n  const [time, setTime] = useState(initialTime);\n  const [running, setRunning] = useState(false);\n  const [currentRound, setCurrentRound] = useState(1);\n  const [isResting, setIsResting] = useState(false);\n  const [, setProgress] = useState(0);\n  const {\n    setActiveIndex,\n    activeIndex,\n    timers,\n    setTimers,\n    timerIsRunning,\n    isPaused\n  } = useContext(GlobalContext);\n  const isActive = props.index === activeIndex;\n  const calculateProgress = () => {\n    if (isResting) {\n      return time / initialTime * 100;\n    } else {\n      return (initialTime - time) / initialTime * 100;\n    }\n  };\n  useEffect(() => {\n    let interval;\n    if (isActive && time > 0 && timerIsRunning && !isPaused) {\n      interval = setInterval(() => {\n        setTime(prevTime => Math.max(0, prevTime - 1000));\n        if (isResting) {\n          const remainingTime = time / initialTime;\n          setProgress(1000 - remainingTime * 1000);\n        }\n      }, 1000);\n    } else if (isActive && time === 0) {\n      console.log({\n        index,\n        activeIndex\n      });\n      clearInterval(interval);\n      if (isResting) {\n        setIsResting(false);\n        setCurrentRound(prevRound => prevRound + 1);\n        setTime(initialTime);\n        setRunning(true);\n        setProgress(0);\n      } else {\n        setIsResting(true);\n        setTime(initialTime);\n        setRunning(true);\n      }\n      if (currentRound >= rounds) {\n        setActiveIndex(index + 1);\n        setCurrentRound(1);\n        setIsResting(false);\n        setTime(0);\n        setRunning(false);\n        setProgress(0);\n      }\n    } else {\n      console.log({\n        index,\n        activeIndex\n      });\n      clearInterval(interval);\n    }\n    return () => clearInterval(interval);\n  }, [running, time, isResting, initialTime, currentRound, rounds, activeIndex, setActiveIndex, timerIsRunning, isPaused, index, isActive]);\n  const handleSetMinutes = mins => {\n    const timerToEdit = timers[props.index];\n    const updatedTimer = {\n      ...timerToEdit,\n      minutes: mins\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(props.index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n  const handleSetSeconds = secs => {\n    const timerToEdit = timers[props.index];\n    const updatedTimer = {\n      ...timerToEdit,\n      seconds: secs\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(props.index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n  const handleSetRounds = rnds => {\n    const timerToEdit = timers[index];\n    const updatedTimer = {\n      ...timerToEdit,\n      rounds: rnds\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"timer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DisplayRounds, {\n    currentRound: currentRound,\n    initialRounds: props.rounds,\n    onRoundsChange: handleSetRounds,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    minutes: props.minutes,\n    setMinutes: handleSetMinutes,\n    seconds: props.seconds,\n    setSeconds: handleSetSeconds,\n    disabled: running,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"display-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, isResting ? /*#__PURE__*/React.createElement(ProgressBar, {\n    value: calculateProgress(),\n    max: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(DisplayTime, {\n    time: time,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  })));\n};\nexport default Tabata;","map":{"version":3,"names":["React","useState","useEffect","useContext","DisplayTime","Input","ProgressBar","DisplayRounds","GlobalContext","Tabata","props","rounds","index","initialTime","minutes","seconds","time","setTime","running","setRunning","currentRound","setCurrentRound","isResting","setIsResting","setProgress","setActiveIndex","activeIndex","timers","setTimers","timerIsRunning","isPaused","isActive","calculateProgress","interval","setInterval","prevTime","Math","max","remainingTime","console","log","clearInterval","prevRound","handleSetMinutes","mins","timerToEdit","updatedTimer","timersCopy","splice","handleSetSeconds","secs","handleSetRounds","rnds","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","initialRounds","onRoundsChange","setMinutes","setSeconds","disabled","value"],"sources":["C:/Desktop/GitHub/assignment-3-mikeycody5/src/components/timers/Tabata.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport DisplayTime from \"../timers/shared/DisplayTime.js\";\nimport Input from \"../timers/shared/input.js\";\nimport ProgressBar from \"../timers/shared/ProgressBar.js\";\nimport DisplayRounds from \"../timers/shared/DisplayRounds\";\nimport { GlobalContext } from \"../../App.js\";\n\nconst Tabata = (props) => {\n  const rounds = props.rounds;\n  const index = props.index;\n  const initialTime = (props.minutes * 60 + props.seconds) * 1000;\n\n  const [time, setTime] = useState(initialTime);\n\n  const [running, setRunning] = useState(false);\n  const [currentRound, setCurrentRound] = useState(1);\n  const [isResting, setIsResting] = useState(false);\n  const [, setProgress] = useState(0);\n\n  const {\n    setActiveIndex,\n    activeIndex,\n    timers,\n    setTimers,\n    timerIsRunning,\n    isPaused,\n  } = useContext(GlobalContext);\n  const isActive = props.index === activeIndex;\n\n\n  const calculateProgress = () => {\n    if (isResting) {\n      return (time / initialTime) * 100;\n    } else {\n      return ((initialTime - time) / initialTime) * 100;\n    }\n  };\n\n\n  useEffect(() => {\n    let interval;\n  \n    if (isActive && time > 0 && timerIsRunning && !isPaused) {\n      interval = setInterval(() => {\n        setTime((prevTime) => Math.max(0, prevTime - 1000));\n        \n        if (isResting) {\n          const remainingTime = time / initialTime;\n          setProgress(1000 - remainingTime * 1000);\n        }\n      }, 1000);\n    } else if (isActive && time === 0) {\n      console.log({ index, activeIndex });\n      clearInterval(interval);\n      if (isResting) {\n        setIsResting(false);\n        setCurrentRound((prevRound) => prevRound + 1);\n        setTime(initialTime);\n        setRunning(true);\n        setProgress(0); \n      } else {\n        setIsResting(true);\n        setTime(initialTime);\n        setRunning(true);\n      }\n  \n      if (currentRound >= rounds) {\n        setActiveIndex(index + 1);\n        setCurrentRound(1);\n        setIsResting(false);\n        setTime(0);\n        setRunning(false);\n        setProgress(0); \n      }\n    } else {\n      console.log({ index, activeIndex });\n      clearInterval(interval);\n    }\n  \n    return () => clearInterval(interval);\n  }, [running, time, isResting, initialTime, currentRound, rounds, activeIndex, setActiveIndex, timerIsRunning, isPaused, index, isActive]);\n  \n\n  \n  const handleSetMinutes = (mins) => {\n    const timerToEdit = timers[props.index];\n    const updatedTimer = {\n      ...timerToEdit,\n      minutes: mins,\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(props.index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n\n  const handleSetSeconds = (secs) => {\n    const timerToEdit = timers[props.index];\n    const updatedTimer = {\n      ...timerToEdit,\n      seconds: secs,\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(props.index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n\n  const handleSetRounds = (rnds) => {\n    const timerToEdit = timers[index];\n    const updatedTimer = {\n      ...timerToEdit,\n      rounds: rnds,\n    };\n    const timersCopy = [...timers];\n    timersCopy.splice(index, 1, updatedTimer);\n    setTimers(timersCopy);\n  };\n\n  return (\n    <div className=\"timer\">\n      <DisplayRounds\n        currentRound={currentRound}\n        initialRounds={props.rounds}\n        onRoundsChange={handleSetRounds}\n      />\n      <Input\n        minutes={props.minutes}\n        setMinutes={handleSetMinutes}\n        seconds={props.seconds}\n        setSeconds={handleSetSeconds}\n        disabled={running}\n      />\n      <div className=\"display-time\">\n        {isResting ? (\n          \n          <ProgressBar value={calculateProgress()} max=\"100\" />\n        ) : (\n          <DisplayTime time={time} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Tabata;"],"mappings":"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"},"metadata":{},"sourceType":"module"}