{"ast":null,"code":"import { createDragDropActions } from '../actions/dragDrop/index.js';\nexport class DragDropManagerImpl {\n  receiveBackend(backend) {\n    this.backend = backend;\n  }\n  getMonitor() {\n    return this.monitor;\n  }\n  getBackend() {\n    return this.backend;\n  }\n  getRegistry() {\n    return this.monitor.registry;\n  }\n  getActions() {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */const manager = this;\n    const {\n      dispatch\n    } = this.store;\n    function bindActionCreator(actionCreator) {\n      return (...args) => {\n        const action = actionCreator.apply(manager, args);\n        if (typeof action !== 'undefined') {\n          dispatch(action);\n        }\n      };\n    }\n    const actions = createDragDropActions(this);\n    return Object.keys(actions).reduce((boundActions, key) => {\n      const action = actions[key];\n      boundActions[key] = bindActionCreator(action);\n      return boundActions;\n    }, {});\n  }\n  dispatch(action) {\n    this.store.dispatch(action);\n  }\n  constructor(store, monitor) {\n    this.isSetUp = false;\n    this.handleRefCountChange = () => {\n      const shouldSetUp = this.store.getState().refCount > 0;\n      if (this.backend) {\n        if (shouldSetUp && !this.isSetUp) {\n          this.backend.setup();\n          this.isSetUp = true;\n        } else if (!shouldSetUp && this.isSetUp) {\n          this.backend.teardown();\n          this.isSetUp = false;\n        }\n      }\n    };\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}